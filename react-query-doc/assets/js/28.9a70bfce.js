(window.webpackJsonp=window.webpackJsonp||[]).push([[28],{352:function(t,e,a){"use strict";a.r(e);var s=a(7),r=Object(s.a)({},(function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"queryclient"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient"}},[t._v("#")]),t._v(" QueryClient")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-2"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-2"}},[t._v("#")]),t._v(" "),a("code",[t._v("QueryClient")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclient)")]),t._v(" "),a("p",[t._v("QueryClient 可用于与缓存交互：")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("import")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" QueryClient "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("from")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'@tanstack/react-query'")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" queryClient "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("new")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token class-name"}},[t._v("QueryClient")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  defaultOptions"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    queries"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("      staleTime"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("Infinity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("    "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prefetchQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" queryFn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fetchPosts "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("它可用的方法有：")]),t._v(" "),a("ul",[a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientfetchquery",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.fetchQuery")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientfetchinfinitequery",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.fetchInfiniteQuery")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientprefetchquery",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.prefetchQuery")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientprefetchinfinitequery",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.prefetchInfiniteQuery")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetquerydata",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.getQueryData")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientensurequerydata",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.ensureQueryData")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetqueriesdata",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.getQueriesData")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetquerydata",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.setQueryData")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetquerystate",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.getQueryState")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetqueriesdata",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.setQueriesData")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientinvalidatequeries",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.invalidateQueries")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientrefetchqueries",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.refetchQueries")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientcancelqueries",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.cancelQueries")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientremovequeries",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.removeQueries")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientresetqueries",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.resetQueries")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientisfetching",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.isFetching")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientismutating",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.isMutating")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetlogger",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("查询客户端.getLogger")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetdefaultoptions",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.getDefaultOptions")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetdefaultoptions",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.setDefaultOptions 设置默认选项")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetquerydefaults",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.getQueryDefaults")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetquerydefaults",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.setQueryDefaults")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetmutationdefaults",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.getMutationDefaults")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetmutationdefaults",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.setMutationDefaults")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetquerycache",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("查询客户端.getQueryCache")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetmutationcache",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.getMutationCache")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientclear",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("查询客户端.clear")]),a("OutboundLink")],1)]),t._v(" "),a("li",[a("a",{attrs:{href:"https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientresumepausedmutations",target:"_blank",rel:"noopener noreferrer"}},[a("code",[t._v("queryClient.resumePausedMutations")]),a("OutboundLink")],1)])]),t._v(" "),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("查询缓存？：查询缓存")]),t._v(" "),a("ul",[a("li",[t._v("选修的")]),t._v(" "),a("li",[t._v("此客户端连接到的查询缓存。")])])]),t._v(" "),a("li",[a("code",[t._v("mutationCache?: 突变缓存")]),t._v(" "),a("ul",[a("li",[t._v("选修的")]),t._v(" "),a("li",[t._v("此客户端连接到的突变缓存。")])])]),t._v(" "),a("li",[a("code",[t._v("记录器？：记录器")]),t._v(" "),a("ul",[a("li",[t._v("选修的")]),t._v(" "),a("li",[t._v("此客户端用于记录调试信息、警告和错误的记录器。如果未设置，则控制台是默认记录器。")])])]),t._v(" "),a("li",[a("code",[t._v("默认选项？：默认选项")]),t._v(" "),a("ul",[a("li",[t._v("选修的")]),t._v(" "),a("li",[t._v("使用此 queryClient 为所有查询和变更定义默认值。")])])])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-fetchquery"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-fetchquery"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.fetchQuery")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientfetchquery)")]),t._v(" "),a("p",[t._v("fetchQuery 是一种异步方法，可用于获取和缓存查询。它将解析数据或抛出错误。如果您只想获取查询而不需要结果，请使用 prefetchQuery 方法。")]),t._v(" "),a("p",[t._v("如果查询存在并且数据未失效或早于给定的 staleTime，则将返回缓存中的数据。否则它将尝试获取最新数据。")]),t._v(" "),a("blockquote",[a("p",[t._v("使用 fetchQuery 和 setQueryData 之间的区别在于 fetchQuery 是异步的，并且将确保在获取数据时呈现同一查询的 useQuery 实例不会创建此查询的重复请求。")])]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" queryFn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("指定一个 staleTime 以仅在数据早于特定时间时获取：")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" queryFn"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" staleTime"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("10000")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("p",[t._v("fetchQuery的选项与useQ​​uery完全一样，除了以下：enabled, refetchInterval, refetchIntervalInBackground, refetchOnWindowFocus, refetchOnReconnect, notifyOnChangeProps, onSuccess, onError, onSettled, useErrorBoundary, select, suspense, keepPreviousData, placeholderData;严格用于 useQuery 和 useInfiniteQuery。您可以查看源代码以获得更清晰的信息。")]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("承诺<TData>")])])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-fetchinfinitequery"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-fetchinfinitequery"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.fetchInfiniteQuery")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientfetchinfinitequery)")]),t._v(" "),a("p",[t._v("fetchInfiniteQuery 类似于 fetchQuery 但可用于获取和缓存无限查询。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("try")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("fetchInfiniteQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" queryFn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("data"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("pages"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("catch")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("error"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("p",[t._v("fetchInfiniteQuery 的选项与 fetchQuery 的选项完全相同。")]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("承诺<无限数据<TData>>")])])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-prefetchquery"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-prefetchquery"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.prefetchQuery")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientprefetchquery)")]),t._v(" "),a("p",[t._v("prefetchQuery 是一种异步方法，可用于在需要或使用 useQuery 和朋友呈现查询之前预取查询。该方法与 fetchQuery 的工作原理相同，只是它不会抛出或返回任何数据。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prefetchQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" queryFn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("您甚至可以在配置中将其与默认的 queryFn 一起使用！")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prefetchQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("p",[t._v("prefetchQuery 的选项与 fetchQuery 的选项完全相同。")]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("承诺<无效>")]),t._v(" "),a("ul",[a("li",[t._v("返回一个承诺，如果不需要提取或执行查询后将立即解决。它不会返回任何数据或抛出任何错误。")])])])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-prefetchinfinitequery"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-prefetchinfinitequery"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.prefetchInfiniteQuery")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientprefetchinfinitequery)")]),t._v(" "),a("p",[t._v("prefetchInfiniteQuery 类似于 prefetchQuery 但可用于预取和缓存无限查询。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("prefetchInfiniteQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" queryFn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("p",[t._v("prefetchInfiniteQuery 的选项与 fetchQuery 的选项完全相同。")]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("承诺<无效>")]),t._v(" "),a("ul",[a("li",[t._v("返回一个承诺，如果不需要提取或执行查询后将立即解决。它不会返回任何数据或抛出任何错误。")])])])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-getquerydata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-getquerydata"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.getQueryData")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetquerydata)")]),t._v(" "),a("p",[t._v("getQueryData 是一个同步函数，可用于获取现有查询的缓存数据。如果查询不存在，将返回 undefined。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQueryData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters?: QueryFilters: 查询过滤器")])]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("数据：TQueryFnData |不明确的")]),t._v(" "),a("ul",[a("li",[t._v("缓存查询的数据，如果查询不存在则未定义。")])])])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-ensurequerydata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-ensurequerydata"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.ensureQueryData")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientensurequerydata)")]),t._v(" "),a("p",[t._v("ensureQueryData 是一个异步函数，可用于获取现有查询的缓存数据。如果查询不存在，将调用 queryClient.fetchQuery 并返回其结果。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("ensureQueryData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" queryFn "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("除了需要 queryKey 之外，ensureQueryData 的选项与 fetchQuery 的选项完全相同。")])]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("承诺<TData>")])])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-getqueriesdata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-getqueriesdata"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.getQueriesData")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetqueriesdata)")]),t._v(" "),a("p",[t._v("getQueriesData 是一个同步函数，可用于获取多个查询的缓存数据。只会返回与传递的 queryKey 或 queryFilter 匹配的查询。如果没有匹配的查询，将返回一个空数组。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQueriesData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filters"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters: QueryFilters: 查询过滤器\n"),a("ul",[a("li",[t._v("如果通过过滤器，将返回与过滤器匹配的queryKeys的数据")])])])]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("[查询键：查询键，数据：TQueryFnData |不明确的][]")]),t._v(" "),a("ul",[a("li",[t._v("匹配查询键的元组数组，如果没有匹配项，则为 []。元组是查询键及其关联数据。")])])])]),t._v(" "),a("p",[a("strong",[t._v("注意事项")])]),t._v(" "),a("p",[t._v("因为每个元组中返回的数据可以具有不同的结构（即使用过滤器返回“活动”查询可以返回不同的数据类型），TData 泛型默认为未知。如果您为 TData 提供更具体的类型，则假定您确定每个元组的数据条目都是同一类型。")]),t._v(" "),a("p",[t._v("这种区别对于知道将返回哪个结构的 ts 开发人员来说更“方便”。")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-setquerydata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-setquerydata"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.setQueryData")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetquerydata)")]),t._v(" "),a("p",[t._v("setQueryData 是一个同步函数，可用于立即更新查询的缓存数据。如果查询不存在，将创建它。如果查询在默认的 5 分钟缓存时间内未被查询挂钩使用，则查询将被垃圾收集。要一次更新多个查询并部分匹配查询键，您需要改用 queryClient.setQueriesData。")]),t._v(" "),a("blockquote",[a("p",[t._v("使用 setQueryData 和 fetchQuery 的区别在于 setQueryData 是同步的，并假定您已经同步地拥有可用数据。如果您需要异步获取数据，建议您重新获取查询键或使用 fetchQuery 来处理异步获取。")])]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQueryData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("queryKey: QueryKey: 查询键")]),t._v(" "),a("li",[a("code",[t._v("更新程序：TQueryFnData |未定义 | ((oldData: TQueryFnData | undefined) => TQueryFnData | undefined)")]),t._v(" "),a("ul",[a("li",[t._v("如果传了non-function，数据会更新为这个值")]),t._v(" "),a("li",[t._v("如果传递了一个函数，它将接收旧数据值并期望返回一个新值。")])])])]),t._v(" "),a("p",[a("strong",[t._v("使用更新程序值")])]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQueryData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" newData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("如果该值未定义，则不更新查询数据。")]),t._v(" "),a("p",[a("strong",[t._v("使用更新程序功能")])]),t._v(" "),a("p",[t._v("为了语法方便，您还可以传递一个更新程序函数，该函数接收当前数据值并返回新值：")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQueryData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" oldData "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=>")]),t._v(" newData"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("如果updater函数返回undefined，则不会更新查询数据。如果更新函数接收到 undefined 作为输入，您可以返回 undefined 以退出更新，从而不创建新的缓存条目。")]),t._v(" "),a("p",[a("strong",[t._v("不变性")])]),t._v(" "),a("p",[t._v("通过 setQueryData 进行的更新必须以不可变的方式执行。不要尝试通过改变 oldData 或您通过 getQueryData 就地检索的数据来直接写入缓存。")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-getquerystate"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-getquerystate"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.getQueryState")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetquerystate)")]),t._v(" "),a("p",[t._v("getQueryState 是一个同步函数，可用于获取现有查询的状态。如果查询不存在，将返回 undefined。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" state "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQueryState")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("state"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),t._v("dataUpdatedAt"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters?: QueryFilters: 查询过滤器")])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-setqueriesdata"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-setqueriesdata"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.setQueriesData")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetqueriesdata)")]),t._v(" "),a("p",[t._v("setQueriesData 是一个同步函数，可用于通过使用过滤器函数或部分匹配查询键来立即更新多个查询的缓存数据。只有与传递的 queryKey 或 queryFilter 匹配的查询才会被更新——不会创建新的缓存条目。在幕后，为每个现有查询调用 setQueryData。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQueriesData")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("filters"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" updater"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters: QueryFilters: 查询过滤器\n"),a("ul",[a("li",[t._v("如果通过过滤器，将更新与过滤器匹配的 queryKeys")])])]),t._v(" "),a("li",[a("code",[t._v("更新程序：TQueryFnData | （旧数据：TQueryFnData | 未定义）=> TQueryFnData")]),t._v(" "),a("ul",[a("li",[t._v("setQueryData updater 函数或新数据，将为每个匹配的 queryKey 调用")])])])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-invalidatequeries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-invalidatequeries"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.invalidateQueries")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientinvalidatequeries)")]),t._v(" "),a("p",[t._v("invalidateQueries 方法可用于根据查询键或查询的任何其他功能可访问属性/状态使缓存中的单个或多个查询无效和重新获取。默认情况下，所有匹配的查询都会立即标记为无效，并在后台重新获取活动查询。")]),t._v(" "),a("ul",[a("li",[t._v("如果您不希望重新获取活动查询，并且只是将其标记为无效，则可以使用 refetchType: 'none' 选项。")]),t._v(" "),a("li",[t._v("如果您还希望重新获取非活动查询，请使用 refetchType: 'all' 选项")])]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("invalidateQueries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  queryKey"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  exact"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  refetchType"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'active'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" throwOnError"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" cancelRefetch "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters?: QueryFilters: 查询过滤器\n"),a("ul",[a("li",[t._v("queryKey?: QueryKey: 查询键")]),t._v(" "),a("li",[a("code",[t._v("refetchType?: '活动' | '不活跃' | '全部' | '没有任何'")]),t._v(" "),a("ul",[a("li",[t._v("默认为“活动”")]),t._v(" "),a("li",[t._v("当设置为 active 时，只有与 refetch 谓词匹配并且正在通过 useQuery 和 friends 主动呈现的查询才会在后台重新获取。")]),t._v(" "),a("li",[t._v("当设置为 inactive 时，只有与 refetch 谓词匹配且未通过 useQuery 和朋友主动呈现的查询才会在后台重新获取。")]),t._v(" "),a("li",[t._v("当设置为 all 时，所有匹配 refetch 谓词的查询都将在后台重新获取。")]),t._v(" "),a("li",[t._v("当设置为 none 时，不会重新获取任何查询，那些与重新获取谓词匹配的查询将被标记为无效。")])])]),t._v(" "),a("li",[a("code",[t._v("refetchPage: (page: TData, index: number, allPages: TData[]) => 布尔值")]),t._v(" "),a("ul",[a("li",[t._v("仅适用于无限查询")]),t._v(" "),a("li",[t._v("使用此函数指定应重新获取哪些页面")])])])])]),t._v(" "),a("li",[t._v("选项？：无效选项：\n"),a("ul",[a("li",[a("code",[t._v("throwOnError?: 布尔值")]),t._v(" "),a("ul",[a("li",[t._v("当设置为 true 时，如果任何查询重新获取任务失败，此方法将抛出。")])])]),t._v(" "),a("li",[a("code",[t._v("cancelRefetch?: 布尔值")]),t._v(" "),a("ul",[a("li",[t._v("默认为真\n"),a("ul",[a("li",[t._v("默认情况下，当前正在运行的请求将在发出新请求之前被取消")])])]),t._v(" "),a("li",[t._v("当设置为 false 时，如果已经有请求正在运行，则不会重新获取。")])])])])])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-refetchqueries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-refetchqueries"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.refetchQueries")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientrefetchqueries)")]),t._v(" "),a("p",[t._v("refetchQueries 方法可用于根据特定条件重新获取查询。")]),t._v(" "),a("p",[t._v("例子：")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// refetch all queries:await queryClient.refetchQueries()")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// refetch all stale queries:await queryClient.refetchQueries({ stale: true })")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// refetch all active queries partially matching a query key:await queryClient.refetchQueries({ queryKey: ['posts'], type: 'active' })")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token comment"}},[t._v("// refetch all active queries exactly matching a query key:await queryClient.refetchQueries({ queryKey: ['posts', 1], type: 'active', exact: true })")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters?: QueryFilters: 查询过滤器\n"),a("ul",[a("li",[a("code",[t._v("refetchPage: (page: TData, index: number, allPages: TData[]) => 布尔值")]),t._v(" "),a("ul",[a("li",[t._v("仅适用于无限查询")]),t._v(" "),a("li",[t._v("使用此函数指定应重新获取哪些页面")])])])])]),t._v(" "),a("li",[t._v("选项？：RefetchOptions：\n"),a("ul",[a("li",[a("code",[t._v("throwOnError?: 布尔值")]),t._v(" "),a("ul",[a("li",[t._v("当设置为 true 时，如果任何查询重新获取任务失败，此方法将抛出。")])])]),t._v(" "),a("li",[a("code",[t._v("cancelRefetch?: 布尔值")]),t._v(" "),a("ul",[a("li",[t._v("默认为真\n"),a("ul",[a("li",[t._v("默认情况下，当前正在运行的请求将在发出新请求之前被取消")])])]),t._v(" "),a("li",[t._v("当设置为 false 时，如果已经有请求正在运行，则不会重新获取。")])])])])])]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("p",[t._v("此函数返回一个承诺，该承诺将在所有查询完成重新获取时解决。默认情况下，如果这些查询中的任何一个重新获取失败，它都不会抛出错误，但这可以通过将 throwOnError 选项设置为 true 来配置")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-cancelqueries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-cancelqueries"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.cancelQueries")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientcancelqueries)")]),t._v(" "),a("p",[t._v("cancelQueries 方法可用于根据查询键或查询的任何其他功能可访问属性/状态取消传出查询。")]),t._v(" "),a("p",[t._v("这在执行乐观更新时最有用，因为您可能需要取消任何传出查询重新获取，以便它们在解析时不会破坏您的乐观更新。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("await")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("cancelQueries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exact"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters?: QueryFilters: 查询过滤器")])]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("p",[t._v("此方法不返回任何内容")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-removequeries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-removequeries"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.removeQueries")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientremovequeries)")]),t._v(" "),a("p",[t._v("removeQueries 方法可用于根据查询键或查询的任何其他功能可访问属性/状态从缓存中删除查询。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("removeQueries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exact"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters?: QueryFilters: 查询过滤器")])]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("p",[t._v("此方法不返回任何内容")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-resetqueries"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-resetqueries"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.resetQueries")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientresetqueries)")]),t._v(" "),a("p",[t._v("resetQueries 方法可用于根据查询键或查询的任何其他功能可访问属性/状态将缓存中的查询重置为其初始状态。")]),t._v(" "),a("p",[t._v("这将通知订阅者——与 clear 不同，后者会删除所有订阅者——并将查询重置为其预加载状态——与 invalidateQueries 不同。如果查询有 initialData，查询的数据将被重置为初始数据。如果查询处于活动状态，它将被重新获取。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resetQueries")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" exact"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("true")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters?: QueryFilters: 查询过滤器\n"),a("ul",[a("li",[a("code",[t._v("refetchPage: (page: TData, index: number, allPages: TData[]) => 布尔值")]),t._v(" "),a("ul",[a("li",[t._v("仅适用于无限查询")]),t._v(" "),a("li",[t._v("使用此函数指定应重新获取哪些页面")])])])])]),t._v(" "),a("li",[t._v("选项？：重置选项：\n"),a("ul",[a("li",[a("code",[t._v("throwOnError?: 布尔值")]),t._v(" "),a("ul",[a("li",[t._v("当设置为 true 时，如果任何查询重新获取任务失败，此方法将抛出。")])])]),t._v(" "),a("li",[a("code",[t._v("cancelRefetch?: 布尔值")]),t._v(" "),a("ul",[a("li",[t._v("默认为真\n"),a("ul",[a("li",[t._v("默认情况下，当前正在运行的请求将在发出新请求之前被取消")])])]),t._v(" "),a("li",[t._v("当设置为 false 时，如果已经有请求正在运行，则不会重新获取。")])])])])])]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("p",[t._v("此方法返回一个承诺，该承诺会在重新获取所有活动查询时解决。")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-isfetching"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-isfetching"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.isFetching")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientisfetching)")]),t._v(" "),a("p",[t._v("此 isFetching 方法返回一个整数，表示缓存中当前正在提取的查询（如果有）数量（包括后台提取、加载新页面或加载更多无限查询结果）")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isFetching")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'At least one query is fetching!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("TanStack Query 还导出了一个方便的 useIsFetching 挂钩，它可以让您在组件中订阅此状态，而无需创建对查询缓存的手动订阅。")]),t._v(" "),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("filters?: QueryFilters: 查询过滤器")])]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("p",[t._v("此方法返回获取查询的数量。")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-ismutating"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-ismutating"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.isMutating")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientismutating)")]),t._v(" "),a("p",[t._v("此 isMutating 方法返回一个整数，表示当前正在获取缓存中的突变数量（如果有）。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("if")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("isMutating")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token builtin"}},[t._v("console")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("log")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'At least one mutation is fetching!'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[t._v("TanStack Query 还导出了一个方便的 useIsMutating 挂钩，它可以让您在组件中订阅此状态，而无需创建对突变缓存的手动订阅。")]),t._v(" "),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("过滤器：MutationFilters：突变过滤器")])]),t._v(" "),a("p",[a("strong",[t._v("Returns")])]),t._v(" "),a("p",[t._v("此方法返回获取突变的数量。")]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"查询客户端-getlogger"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询客户端-getlogger"}},[t._v("#")]),t._v(" "),a("code",[t._v("查询客户端.getLogger")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetlogger)")]),t._v(" "),a("p",[t._v("getLogger 方法返回创建客户端时设置的记录器。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" logger "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getLogger")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-getdefaultoptions"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-getdefaultoptions"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.getDefaultOptions")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetdefaultoptions)")]),t._v(" "),a("p",[t._v("getDefaultOptions 方法返回在创建客户端时或使用 setDefaultOptions 设置的默认选项。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" defaultOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getDefaultOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-setdefaultoptions-设置默认选项"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-setdefaultoptions-设置默认选项"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.setDefaultOptions 设置默认选项")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetdefaultoptions)")]),t._v(" "),a("p",[t._v("setDefaultOptions 方法可用于动态设置此 queryClient 的默认选项。先前定义的默认选项将被覆盖。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setDefaultOptions")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  queries"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("    staleTime"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token number"}},[t._v("Infinity")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-getquerydefaults"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-getquerydefaults"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.getQueryDefaults")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetquerydefaults)")]),t._v(" "),a("p",[t._v("getQueryDefaults 方法返回为特定查询设置的默认选项：")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" defaultOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQueryDefaults")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("blockquote",[a("p",[t._v("请注意，如果多个查询默认值与给定的查询键匹配，则返回第一个匹配的。这可能会导致意外行为。请参阅设置查询默认值。")])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-setquerydefaults"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-setquerydefaults"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.setQueryDefaults")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetquerydefaults)")]),t._v(" "),a("p",[t._v("setQueryDefaults 可用于为特定查询设置默认选项：")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setQueryDefaults")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryFn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" fetchPosts "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useQuery")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" queryKey"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'posts'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[t._v("queryKey: QueryKey: 查询键")]),t._v(" "),a("li",[a("code",[t._v("选项：查询选项")])])]),t._v(" "),a("blockquote",[a("p",[t._v("如 getQueryDefaults 所述，查询默认值的注册顺序很重要。由于 getQueryDefaults 返回第一个匹配的默认值，因此应按以下顺序进行注册：从最不通用的键到最通用的键。这样，在特定键的情况下，第一个匹配的将是预期的。")])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-getmutationdefaults"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-getmutationdefaults"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.getMutationDefaults")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetmutationdefaults)")]),t._v(" "),a("p",[t._v("getMutationDefaults 方法返回为特定突变设置的默认选项：")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" defaultOptions "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMutationDefaults")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'addPost'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-setmutationdefaults"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-setmutationdefaults"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.setMutationDefaults")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientsetmutationdefaults)")]),t._v(" "),a("p",[t._v("setMutationDefaults 可用于设置特定突变的默认选项：")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("setMutationDefaults")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'addPost'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mutationFn"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" addPost "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("function")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("Component")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("  "),a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" data "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("useMutation")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v(" mutationKey"),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),a("span",{pre:!0,attrs:{class:"token string"}},[t._v("'addPost'")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v(" "),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])])]),a("p",[a("strong",[t._v("选项")])]),t._v(" "),a("ul",[a("li",[a("code",[t._v("突变键：字符串 |未知[]")])]),t._v(" "),a("li",[a("code",[t._v("选项：MutationOptions")])])]),t._v(" "),a("blockquote",[a("p",[t._v("与 setQueryDefaults 类似，注册顺序在这里很重要。")])]),t._v(" "),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"查询客户端-getquerycache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询客户端-getquerycache"}},[t._v("#")]),t._v(" "),a("code",[t._v("查询客户端.getQueryCache")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetquerycache)")]),t._v(" "),a("p",[t._v("getQueryCache 方法返回此客户端连接到的查询缓存。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" queryCache "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getQueryCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-getmutationcache"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-getmutationcache"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.getMutationCache")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientgetmutationcache)")]),t._v(" "),a("p",[t._v("getMutationCache 方法返回此客户端连接到的突变缓存。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[a("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("const")]),t._v(" mutationCache "),a("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),t._v(" queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("getMutationCache")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"查询客户端-clear"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#查询客户端-clear"}},[t._v("#")]),t._v(" "),a("code",[t._v("查询客户端.clear")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientclear)")]),t._v(" "),a("p",[t._v("clear 方法清除所有连接的缓存。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("clear")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[t._v("[")]),t._v(" "),a("h2",{attrs:{id:"queryclient-resumepausedmutations"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#queryclient-resumepausedmutations"}},[t._v("#")]),t._v(" "),a("code",[t._v("queryClient.resumePausedMutations")])]),t._v(" "),a("p",[t._v("](https://tanstack.com/query/latest/docs/react/reference/QueryClient#queryclientresumepausedmutations)")]),t._v(" "),a("p",[t._v("可用于恢复因没有网络连接而暂停的突变。")]),t._v(" "),a("div",{staticClass:"language-tsx extra-class"},[a("pre",{pre:!0,attrs:{class:"language-tsx"}},[a("code",[t._v("queryClient"),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(".")]),a("span",{pre:!0,attrs:{class:"token function"}},[t._v("resumePausedMutations")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),a("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])])]),a("p",[a("a",{attrs:{href:"https://github.com/tanstack/query/tree/main/docs/react/reference/QueryClient.md",target:"_blank",rel:"noopener noreferrer"}},[t._v("在 GitHub 上编辑"),a("OutboundLink")],1)])])}),[],!1,null,null,null);e.default=r.exports}}]);