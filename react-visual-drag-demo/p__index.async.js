"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{99767:function(ot,z,f){f.r(z),f.d(z,{default:function(){return nt}});var W=f(27424),N=f.n(W),x=f(62435),y=f(93578),Z=f(38416),j=f.n(Z),F={button:"button___FwiRa"},n=f(86074),J=function(e){var r=e.propValue;return(0,n.jsx)("button",{className:F.button,children:r})},$=J,K={chart:"chart___uyTEF"},Q=f(16649),q=f(87155),ee=function(e){var r=e.propValue;return(0,n.jsx)("div",{className:K.chart,children:(0,n.jsx)(q.Z,{echarts:Q,option:r.option,notMerge:!0,lazyUpdate:!0,style:{height:"100%",width:"100%"}})})},te=ee,re={circle:"circle___k9vDg"},ne=function(e){return(0,n.jsx)("div",{className:re.circle})},ae=ne,oe={"line-shape":"line-shape___e93rv"},ie=function(e){return(0,n.jsx)("div",{className:oe["line-shape"]})},le=ie,se=function(e){var r=e.propValue,a=e.style;return(0,n.jsx)("div",{style:a,children:(0,n.jsx)("img",{draggable:!1,src:r,style:{width:"100%",height:"100%"}})})},ce=se,de={"rect-shape":"rect-shape___nhf6Z"},ue=function(e){return(0,n.jsx)("div",{className:de["rect-shape"]})},he=ue,ve={"svg-star-container":"svg-star-container___Z9Kt8","v-text":"v-text___IbIaG"},fe=function(e){var r=e.style,a=r.width,o=r.height,l=r.borderColor,c=r.backgroundColor,i=(0,x.useRef)(null),s=(0,x.useState)([]),d=N()(s,2),m=d[0],_=d[1];(0,x.useEffect)(function(){T(a,o)},[a,o]);var T=function(g,u){var h=[[.5,0],[.625,.375],[1,.375],[.75,.625],[.875,1],[.5,.75],[.125,1],[.25,.625],[0,.375],[.375,.375]],p=h.map(function(C){return g*C[0]+" "+u*C[1]});_(p.toString())};return(0,n.jsx)("div",{className:ve["svg-star-container"],children:(0,n.jsx)("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("polygon",{ref:i,points:m,stroke:l,fill:c,"stroke-width":"1"})})})},me=fe,I={table:"table___yfQ4J",bold:"bold___xrj_z",stripe:"stripe___CoMOw"},ge=function(e){var r=e.propValue,a=e.style;return(0,n.jsx)("table",{className:I.table,children:(0,n.jsx)("tbody",{children:r.data.map(function(o,l){return(0,n.jsx)("tr",{className:"".concat(r.stripe&&l%2&&I.stripe," ").concat(r.thBold&&l===0&&I.bold),children:o.map(function(c,i){return(0,n.jsx)("td",{children:c},i)})},l)})})})},pe=ge,X={"text-box":"text-box___vDlFz",name:"name___SE33q",value:"value___DDx1n"},Ce=function(e){var r=e.style,a=e.name;return(0,n.jsx)("div",{className:X["text-box"],style:r,title:a,children:(0,n.jsx)("div",{className:X.name,children:a||"\u53CC\u51FB\u8F93\u5165\u6587\u5B57"})})},xe=Ce,_e={"svg-triangle-container":"svg-triangle-container___AtraG","v-text":"v-text___fVfmj"},we=function(e){var r=e.style,a=r.width,o=r.height,l=r.borderColor,c=r.backgroundColor,i=(0,x.useRef)(null),s=(0,x.useState)([]),d=N()(s,2),m=d[0],_=d[1];(0,x.useEffect)(function(){T(a,o)},[a,o]);var T=function(g,u){var h=[[.5,.05],[1,.95],[0,.95]],p=h.map(function(C){return g*C[0]+" "+u*C[1]});_(p.toString())};return(0,n.jsx)("div",{className:_e["svg-triangle-container"],children:(0,n.jsx)("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("polygon",{ref:i,points:m,stroke:l,fill:c,"stroke-width":"1"})})})},be=we,b,L={width:1e3,height:645,color:"#000",background:"#fff"},Te=["lt","t","rt","r","rb","b","lb","l"],je={lt:"nw-resize",t:"n-resize",rt:"ne-resize",r:"e-resize",rb:"se-resize",b:"s-resize",lb:"sw-resize",l:"w-resize"},v={TEXT:1,BUTTON:2,IMG:3,TABLE:4,LINE:5,TRI:6,REC:7,STAR:8,CIRCLE:9,CHART:10},H=[{type:v.TEXT,icon:"icon-drag-text",label:"\u6587\u5B57",propValue:"\u53CC\u51FB\u7F16\u8F91\u6587\u5B57",style:{width:200,height:28,fontWeight:400,letterSpacing:0}},{type:v.BUTTON,icon:"icon-drag-button",label:"\u6309\u94AE",propValue:"\u6309\u94AE",style:{width:100,height:34,borderWidth:1,borderColor:"",borderRadius:"",fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""}},{type:v.IMG,icon:"icon-drag-img",label:"\u56FE\u7247",propValue:"https://picsum.photos/300/200",style:{width:300,height:200,borderRadius:""}},{type:v.TABLE,icon:"icon-drag-table",label:"\u8868\u683C",propValue:{data:[["\u8868\u59341","\u8868\u59342","\u8868\u59343"],["\u5185\u5BB91","\u5185\u5BB92","\u5185\u5BB93"]],stripe:!0,thBold:!0},style:{width:600,height:200,fontSize:"",fontWeight:400,textAlign:"center",color:"",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.CHART,icon:"icon-drag-chart",label:"\u56FE\u8868",propValue:{chart:"VChart",option:{title:{text:"\u67F1\u72B6\u56FE",show:!0},legend:{show:!0},tooltip:{show:!0,trigger:"item"},xAxis:{show:!0,data:["A","B","C","D","E"]},yAxis:{},series:{type:"bar",name:"\u9500\u91CF",data:[23,61,35,77,35],itemStyle:{barBorderRadius:5,borderWidth:1,borderType:"solid",borderColor:"#73c0de",shadowColor:"#5470c6",shadowBlur:3}}}},style:{width:760,height:300,borderRadius:""}},{type:v.LINE,icon:"icon-drag-line",label:"\u7EBF",style:{width:200,height:2,backgroundColor:"#000"}},{type:v.TRI,icon:"icon-drag-triangle",label:"\u4E09\u89D2\u5F62",style:{width:80,height:80,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.REC,icon:"icon-drag-rectangle",label:"\u77E9\u5F62",style:{width:200,height:200,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",borderWidth:1,backgroundColor:"",borderStyle:"solid",borderRadius:"",verticalAlign:"middle"}},{type:v.STAR,icon:"icon-drag-star",label:"\u4E94\u89D2\u661F",style:{width:80,height:80,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.CIRCLE,icon:"icon-drag-circle",label:"\u5706\u5F62",style:{width:200,height:200,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",verticalAlign:"middle"}}],G=(b={},j()(b,v.TEXT,xe),j()(b,v.BUTTON,$),j()(b,v.IMG,ce),j()(b,v.TABLE,pe),j()(b,v.LINE,le),j()(b,v.TRI,be),j()(b,v.REC,he),j()(b,v.STAR,me),j()(b,v.CIRCLE,ae),j()(b,v.CHART,te),b),U={"drag-com-list":"drag-com-list___HNdKj",list:"list___DUYsi",iconfont:"iconfont___AqFtN","icon-wenben":"icon-wenben___f1NRt","icon-biaoge":"icon-biaoge___V8pn2","icon-tupian":"icon-tupian___zzsDD"},Se=function(e){var r=function(o){o.dataTransfer.setData("comType",o.target.dataset.type)};return(0,n.jsx)("div",{className:U["drag-com-list"],onDragStart:r,children:H.map(function(a,o){return(0,n.jsx)("div",{className:U.list,draggable:!0,"data-index":o,"data-type":a.type,children:(0,n.jsx)("i",{className:"iconfont ".concat(a.icon)})},o)})})},ye=Se,Le=f(42122),S=f.n(Le),De=function(e){return(0,n.jsxs)("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"relative",top:0,left:0},children:[(0,n.jsxs)("defs",{children:[(0,n.jsx)("pattern",{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse",children:(0,n.jsx)("path",{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"})}),(0,n.jsxs)("pattern",{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse",children:[(0,n.jsx)("rect",{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}),(0,n.jsx)("path",{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"})]})]}),(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})},Re=De,O={shape:"shape___VmOGv","shape-point":"shape-point___qcRVh",delete:"delete___JJKkb",active:"active___bNgQ4"},Me={lt:Ne,t:ke,rt:Ee,r:Ie,rb:Pe,b:Oe,lb:Ae,l:Be};function Ne(t,e){var r=t.width,a=t.height,o=t.top,l=t.left,c=Math.max(0,e.x),i=Math.max(0,e.y),s=l-c,d=o-i;t.width=r+s,t.height=a+d,t.top=i,t.left=c}function Ee(t,e,r){var a=t.height,o=t.top,l=t.left,c=Math.max(0,Math.min(r.width,e.x)),i=Math.max(0,e.y),s=c-l,d=o-i;t.width=s,t.height=a+d,t.top=i}function Pe(t,e,r){var a=t.top,o=t.left,l=Math.max(0,Math.min(r.width,e.x)),c=Math.max(0,Math.min(r.height,e.y)),i=l-o,s=c-a;t.width=i,t.height=s}function Ae(t,e,r){var a=t.width,o=t.top,l=t.left,c=Math.max(0,e.x),i=Math.max(0,Math.min(r.height,e.y)),s=l-c,d=i-o;t.width=a+s,t.height=d,t.left=c}function ke(t,e){var r=t.height,a=t.top;if(!(e.y<0)){var o=a-e.y;t.height=r+o,t.top=e.y}}function Ie(t,e,r){var a=r.width;if(!(e.x>a)){var o=e.x-t.left;t.width=o}}function Oe(t,e,r){var a=r.height;e.y>a||(t.height=e.y-t.top)}function Be(t,e){var r=t.width,a=t.left;if(!(e.x<0)){var o=a-e.x;t.width=r+o,t.left=e.x}}function Ve(t,e,r,a){Me[t](e,r,a)}function ze(t,e,r,a){var o=a.width,l=a.height,c=r.x+e.left,i=r.y+e.top;t.left=Math.max(0,Math.min(c,o-t.width)),t.top=Math.max(0,Math.min(i,l-t.height))}var Xe=function(e,r){var a=r.width,o=r.height,l=/t/.test(e),c=/b/.test(e),i=/l/.test(e),s=/r/.test(e),d=0,m=0;e.length===2?(d=i?0:a,m=l?0:o):((l||c)&&(d=a/2,m=l?0:o),(i||s)&&(d=i?0:a,m=Math.floor(o/2)));var _={marginLeft:"-4px",marginTop:"-4px",left:"".concat(d,"px"),top:"".concat(m,"px"),cursor:je[e]};return _},He=function(e){var r=e.style,a=e.element,o=e.children,l=e.editorClient,c=e.isPreview,i=(0,y.tT)("home"),s=i.curComponent,d=i.setCurComonent,m=i.setIsClickComponent,_=i.updateCurComponent,T=function(h){if(!c){m(!0),h.stopPropagation(),d(a);var p=S()({},r),C={x:h.clientX,y:h.clientY},D={top:Number(p.top),left:Number(p.left)},P=function(k){var at={x:k.clientX-C.x,y:k.clientY-C.y};ze(p,D,at,L),_(p,a)},A=function M(){document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",A)}},w=function(h,p){if(!c){p.stopPropagation(),p.preventDefault();var C=S()({},r),D=function(M){var k={x:M.clientX-Math.round(l.left),y:M.clientY-Math.round(l.top)};Ve(h,C,k,L),_(C,a)},P=function A(){document.removeEventListener("mousemove",D),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",D),document.addEventListener("mouseup",P)}},g=!c&&(s==null?void 0:s.id)===a.id;return(0,n.jsxs)("div",{className:"".concat(O.shape," ").concat(g?O.active:""),onMouseDown:T,style:r,children:[g&&Te.map(function(u){return(0,n.jsx)("div",{className:"".concat(O["shape-point"]," "),style:Xe(u,r),onMouseDown:function(p){w(u,p)}},u)}),o]})},Y=He,Ge={editor:"editor___wGPeX",lock:"lock___PlZuI"},Ue=x.forwardRef(function(t,e){var r=(0,y.tT)("home"),a=r.curComponent,o=r.realtimeList,l=(0,x.useRef)(null),c=function(){var d;return(d=l.current)===null||d===void 0?void 0:d.getBoundingClientRect()};(0,x.useImperativeHandle)(e,function(){return{editorClient:c()}});var i=function(d){a||d.preventDefault()};return(0,n.jsxs)("div",{ref:l,className:Ge.editor,style:L,onMouseDown:i,children:[(0,n.jsx)(Re,{}),o.map(function(s,d){var m=G[s.type];return(0,n.jsx)(Y,{style:s.style,element:s,editorClient:c(),children:(0,n.jsx)(m,S()({},s))},s.id)})]})}),Ye=Ue,We=f(35197),B=f(54513),Ze={"preview-modal":"preview-modal___HfH8T"},Fe=function(e){var r=e.visible,a=(0,y.tT)("home"),o=a.realtimeList,l=(0,x.useRef)(null),c=(0,x.useState)(0),i=N()(c,2),s=i[0],d=i[1];(0,x.useEffect)(function(){r&&d(m())},[r]);var m=function(){var w=l.current||{},g=w.clientHeight,u=w.clientWidth;return(0,B.yZ)(L.width,L.height,u,g)},_=function(){return(0,n.jsx)("div",{style:S()(S()({},L),{},{position:"relative",transform:"scale(".concat(s,")"),transformOrigin:"0% 0%"}),children:o.map(function(w,g){var u=G[w.type];return(0,n.jsx)(Y,{style:w.style,isPreview:!0,children:(0,n.jsx)(u,S()(S()({},w),{},{visible:!0}))},w.id)})})};return(0,n.jsx)(We.Z,S()(S()({title:"\u9884\u89C8"},e),{},{width:800,footer:null,forceRender:!0,className:Ze["preview-modal"],children:(0,n.jsx)("div",{ref:l,style:{width:"100%",height:"100%"},children:s&&_()})}))},Je=Fe,E={"real-time-component-list":"real-time-component-list___DixQO",list:"list___xS3kl","icon-container":"icon-container___PdGfq",name:"name___EmUss",actived:"actived___EVn_J"},$e=function(e){var r=(0,y.tT)("home"),a=r.realtimeList,o=r.moveUpComponent,l=r.moveDownComponent,c=r.deleteComponent;return(0,n.jsx)("div",{className:E["real-time-component-list"],children:a.map(function(i,s){return(0,n.jsxs)("div",{className:"flex_start_center ".concat(E.list),children:[(0,n.jsx)("i",{className:"iconfont ".concat(i.icon)}),(0,n.jsx)("span",{className:E.name,children:i.label}),(0,n.jsxs)("div",{className:E["icon-container"],children:[(0,n.jsx)("i",{className:"iconfont icon-drag-up",onClick:function(){o(s)}}),(0,n.jsx)("i",{className:"iconfont icon-drag-down",onClick:function(){l(s)}}),(0,n.jsx)("i",{className:"iconfont icon-drag-delete",onClick:function(){c(i.id)}})]})]},s)})})},Ke=$e,Qe=f(27790),V=f(71577),qe=f(66935),et={toolbar:"toolbar___NSLzd","canvas-config":"canvas-config___pkiFM"},tt=function(e){var r=e.canvasStyleData,a=r===void 0?{}:r,o=e.onPreview,l=(0,y.tT)("home"),c=l.setRealtimeList,i=l.realtimeList,s=function(){},d=function(){},m=function(){},_=function(){qe.Z.set({name:"drag_data",value:i}),Qe.ZP.success("\u4FDD\u5B58\u6210\u529F\uFF01")},T=function(){c([])},w=function(){},g=function(){},u=function(){};return(0,n.jsxs)("div",{className:"flex_start_center ".concat(et.toolbar),children:[(0,n.jsx)(V.ZP,{onClick:o,children:"\u9884\u89C8"}),(0,n.jsx)(V.ZP,{onClick:_,children:"\u4FDD\u5B58"}),(0,n.jsx)(V.ZP,{onClick:T,children:"\u6E05\u7A7A\u753B\u5E03"})]})},rt=tt,R={home:"home___a7EPH",left:"left____LZ0X",right:"right___q0hdW","el-select":"el-select___nSETD",center:"center___VV5Nh",content:"content___nGCOl",placeholder:"placeholder___kTIgg","global-attr":"global-attr___yfCe_"};function nt(){var t=(0,y.tT)("home"),e=t.addRealtimeList,r=t.isClickComponent,a=t.setCurComonent,o=t.setIsClickComponent,l=(0,x.useState)(!1),c=N()(l,2),i=c[0],s=c[1],d=(0,x.useRef)(null),m=function(u){u.preventDefault()},_=function(u){u.preventDefault(),u.stopPropagation();var h=JSON.parse(u.dataTransfer.getData("comType")),p=d.current.editorClient;if(h){var C=(0,B.p$)(H.find(function(D){return D.type===h}))||{};C.id=(0,B.ZP)(),C.style.top=u.clientY-p.y,C.style.left=u.clientX-p.x,e(C)}},T=function(u){u.stopPropagation(),o(!1)},w=function(){r||a(null)};return(0,n.jsxs)("div",{className:R.home,children:[(0,n.jsx)(rt,{onPreview:function(){s(!0)}}),(0,n.jsxs)("main",{className:"flex_start_center",children:[(0,n.jsxs)("section",{className:R.left,children:[(0,n.jsx)(ye,{}),(0,n.jsx)(Ke,{})]}),(0,n.jsx)("section",{className:R.center,children:(0,n.jsx)("div",{className:R.content,onDragOver:m,onDrop:_,onMouseDown:T,onMouseUp:w,children:(0,n.jsx)(Ye,{ref:d})})}),(0,n.jsx)("section",{className:R.right})]}),i&&(0,n.jsx)(Je,{visible:i,onCancel:function(){s(!1)}})]})}}}]);
