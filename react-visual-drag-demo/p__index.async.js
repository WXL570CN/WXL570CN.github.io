"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{44410:function(ot,O,g){g.r(O),g.d(O,{default:function(){return at}});var Y=g(67104),p=g.n(Y),U=g(16854),R=g.n(U),W=g(47930),j=g.n(W),Z={button:"button___FwiRa"},n=g(32648),J=function(e){var r=e.propValue;return(0,n.jsx)("button",{className:Z.button,children:r})},F=J,K={chart:"chart___uyTEF"},Q=g(56689),$=g(51183),q=function(e){var r=e.propValue;return(0,n.jsx)("div",{className:K.chart,children:(0,n.jsx)($.Z,{echarts:Q,option:r.option,notMerge:!0,lazyUpdate:!0,style:{height:"100%",width:"100%"}})})},ee=q,te={circle:"circle___k9vDg"},re=function(e){return(0,n.jsx)("div",{className:te.circle})},ae=re,ne={"line-shape":"line-shape___e93rv"},oe=function(e){return(0,n.jsx)("div",{className:ne["line-shape"]})},ie=oe,le=function(e){var r=e.propValue,a=e.style;return(0,n.jsx)("div",{style:a,children:(0,n.jsx)("img",{draggable:!1,src:r,style:{width:"100%",height:"100%"}})})},se=le,ce={"rect-shape":"rect-shape___nhf6Z"},de=function(e){return(0,n.jsx)("div",{className:ce["rect-shape"]})},ue=de,m=g(77617),he={"svg-star-container":"svg-star-container___Z9Kt8","v-text":"v-text___IbIaG"},ve=function(e){var r=e.style,a=r.width,o=r.height,l=r.borderColor,i=r.backgroundColor,s=(0,m.useRef)(null),c=(0,m.useState)([]),u=R()(c,2),_=u[0],y=u[1];(0,m.useEffect)(function(){f(a,o)},[a,o]);var f=function(d,w){var S=[[.5,0],[.625,.375],[1,.375],[.75,.625],[.875,1],[.5,.75],[.125,1],[.25,.625],[0,.375],[.375,.375]],x=S.map(function(b){return d*b[0]+" "+w*b[1]});y(x.toString())};return(0,n.jsx)("div",{className:he["svg-star-container"],children:(0,n.jsx)("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("polygon",{ref:s,points:_,stroke:l,fill:i,"stroke-width":"1"})})})},fe=ve,P={table:"table___yfQ4J",bold:"bold___xrj_z",stripe:"stripe___CoMOw"},ge=function(e){var r=e.propValue,a=e.style;return(0,n.jsx)("table",{className:P.table,children:(0,n.jsx)("tbody",{children:r.data.map(function(o,l){return(0,n.jsx)("tr",{className:"".concat(r.stripe&&l%2&&P.stripe," ").concat(r.thBold&&l===0&&P.bold),children:o.map(function(i,s){return(0,n.jsx)("td",{children:i},s)})},l)})})})},pe=ge,k={"text-box":"text-box___vDlFz",name:"name___SE33q",value:"value___DDx1n"},me=function(e){var r=e.style,a=e.name;return(0,n.jsx)("div",{className:k["text-box"],style:r,title:a,children:(0,n.jsx)("div",{className:k.name,children:a||"\u53CC\u51FB\u8F93\u5165\u6587\u5B57"})})},xe=me,Ce={"svg-triangle-container":"svg-triangle-container___AtraG","v-text":"v-text___fVfmj"},_e=function(e){var r=e.style,a=r.width,o=r.height,l=r.borderColor,i=r.backgroundColor,s=(0,m.useRef)(null),c=(0,m.useState)([]),u=R()(c,2),_=u[0],y=u[1];(0,m.useEffect)(function(){f(a,o)},[a,o]);var f=function(d,w){var S=[[.5,.05],[1,.95],[0,.95]],x=S.map(function(b){return d*b[0]+" "+w*b[1]});y(x.toString())};return(0,n.jsx)("div",{className:Ce["svg-triangle-container"],children:(0,n.jsx)("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("polygon",{ref:s,points:_,stroke:l,fill:i,"stroke-width":"1"})})})},we=_e,C,T={width:1e3,height:645,color:"#000",background:"#fff"},be=["lt","t","rt","r","rb","b","lb","l"],ye={lt:"nw-resize",t:"n-resize",rt:"ne-resize",r:"e-resize",rb:"se-resize",b:"s-resize",lb:"sw-resize",l:"w-resize"},v={TEXT:1,BUTTON:2,IMG:3,TABLE:4,LINE:5,TRI:6,REC:7,STAR:8,CIRCLE:9,CHART:10},B=[{type:v.TEXT,icon:"icon-drag-text",label:"\u6587\u5B57",propValue:"\u53CC\u51FB\u7F16\u8F91\u6587\u5B57",style:{width:200,height:28,fontWeight:400,letterSpacing:0}},{type:v.BUTTON,icon:"icon-drag-button",label:"\u6309\u94AE",propValue:"\u6309\u94AE",style:{width:100,height:34,borderWidth:1,borderColor:"",borderRadius:"",fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""}},{type:v.IMG,icon:"icon-drag-img",label:"\u56FE\u7247",propValue:"https://picsum.photos/300/200",style:{width:300,height:200,borderRadius:""}},{type:v.TABLE,icon:"icon-drag-table",label:"\u8868\u683C",propValue:{data:[["\u8868\u59341","\u8868\u59342","\u8868\u59343"],["\u5185\u5BB91","\u5185\u5BB92","\u5185\u5BB93"]],stripe:!0,thBold:!0},style:{width:600,height:200,fontSize:"",fontWeight:400,textAlign:"center",color:"",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.CHART,icon:"icon-drag-chart",label:"\u56FE\u8868",propValue:{chart:"VChart",option:{title:{text:"\u67F1\u72B6\u56FE",show:!0},legend:{show:!0},tooltip:{show:!0,trigger:"item"},xAxis:{show:!0,data:["A","B","C","D","E"]},yAxis:{},series:{type:"bar",name:"\u9500\u91CF",data:[23,61,35,77,35],itemStyle:{barBorderRadius:5,borderWidth:1,borderType:"solid",borderColor:"#73c0de",shadowColor:"#5470c6",shadowBlur:3}}}},style:{width:760,height:300,borderRadius:""}},{type:v.LINE,icon:"icon-drag-line",label:"\u7EBF",style:{width:200,height:2,backgroundColor:"#000"}},{type:v.TRI,icon:"icon-drag-triangle",label:"\u4E09\u89D2\u5F62",style:{width:80,height:80,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.REC,icon:"icon-drag-rectangle",label:"\u77E9\u5F62",style:{width:200,height:200,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",borderWidth:1,backgroundColor:"",borderStyle:"solid",borderRadius:"",verticalAlign:"middle"}},{type:v.STAR,icon:"icon-drag-star",label:"\u4E94\u89D2\u661F",style:{width:80,height:80,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.CIRCLE,icon:"icon-drag-circle",label:"\u5706\u5F62",style:{width:200,height:200,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",verticalAlign:"middle"}}],V=(C={},j()(C,v.TEXT,xe),j()(C,v.BUTTON,F),j()(C,v.IMG,se),j()(C,v.TABLE,pe),j()(C,v.LINE,ie),j()(C,v.TRI,we),j()(C,v.REC,ue),j()(C,v.STAR,fe),j()(C,v.CIRCLE,ae),j()(C,v.CHART,ee),C),z={"drag-com-list":"drag-com-list___HNdKj",list:"list___DUYsi",iconfont:"iconfont___AqFtN","icon-wenben":"icon-wenben___f1NRt","icon-biaoge":"icon-biaoge___V8pn2","icon-tupian":"icon-tupian___zzsDD"},Se=function(e){var r=function(o){o.dataTransfer.setData("comType",o.target.dataset.type)};return(0,n.jsx)("div",{className:z["drag-com-list"],onDragStart:r,children:B.map(function(a,o){return(0,n.jsx)("div",{className:z.list,draggable:!0,"data-index":o,"data-type":a.type,children:(0,n.jsx)("i",{className:"iconfont ".concat(a.icon)})},o)})})},je=Se,D=g(64515),Te=function(e){return(0,n.jsxs)("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"relative",top:0,left:0},children:[(0,n.jsxs)("defs",{children:[(0,n.jsx)("pattern",{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse",children:(0,n.jsx)("path",{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"})}),(0,n.jsxs)("pattern",{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse",children:[(0,n.jsx)("rect",{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}),(0,n.jsx)("path",{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"})]})]}),(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})},De=Te,Le={lt:Ne,t:Pe,rt:Re,r:Ae,rb:Me,b:Ie,lb:Ee,l:Oe};function Ne(t,e){var r=t.width,a=t.height,o=t.top,l=t.left,i=Math.max(0,e.x),s=Math.max(0,e.y),c=l-i,u=o-s;t.width=r+c,t.height=a+u,t.top=s,t.left=i}function Re(t,e,r){var a=t.height,o=t.top,l=t.left,i=Math.max(0,Math.min(r.width,e.x)),s=Math.max(0,e.y),c=i-l,u=o-s;t.width=c,t.height=a+u,t.top=s}function Me(t,e,r){var a=t.top,o=t.left,l=Math.max(0,Math.min(r.width,e.x)),i=Math.max(0,Math.min(r.height,e.y)),s=l-o,c=i-a;t.width=s,t.height=c}function Ee(t,e,r){var a=t.width,o=t.top,l=t.left,i=Math.max(0,e.x),s=Math.max(0,Math.min(r.height,e.y)),c=l-i,u=s-o;t.width=a+c,t.height=u,t.left=i}function Pe(t,e){var r=t.height,a=t.top;if(!(e.y<0)){var o=a-e.y;t.height=r+o,t.top=e.y}}function Ae(t,e,r){var a=r.width;if(!(e.x>a)){var o=e.x-t.left;t.width=o}}function Ie(t,e,r){var a=r.height;e.y>a||(t.height=e.y-t.top)}function Oe(t,e){var r=t.width,a=t.left;if(!(e.x<0)){var o=a-e.x;t.width=r+o,t.left=e.x}}function ke(t,e,r,a){Le[t](e,r,a)}function Be(t,e,r,a){var o=a.width,l=a.height,i=r.x+e.left,s=r.y+e.top;t.left=Math.max(0,Math.min(i,o-t.width)),t.top=Math.max(0,Math.min(s,l-t.height))}var Ve=function(e,r){var a=r.width,o=r.height,l=a/2,i=o/2,s={lt:[0,0],rt:[a,0],lb:[0,o],rb:[a,o],t:[l,0],b:[l,o],l:[0,Math.floor(i)],r:[a,Math.floor(i)]}[e];return{marginLeft:"-4px",marginTop:"-4px",left:"".concat(s[0],"px"),top:"".concat(s[1],"px"),cursor:ye[e]}},A={shape:"shape___VmOGv","shape-point":"shape-point___qcRVh",delete:"delete___JJKkb",active:"active___bNgQ4"},ze=function(e){var r=e.dispatch,a=e.style,o=e.element,l=e.children,i=e.editorClient,s=e.isPreview,c=e.curComponent,u=function(h){r({type:"drag/setIsClickComponent",payload:!0}),h.stopPropagation(),r({type:"drag/setCurComponent",payload:o});var d=p()({},a),w={x:h.clientX,y:h.clientY},S={top:Number(d.top),left:Number(d.left)},x=function(E){var nt={x:E.clientX-w.x,y:E.clientY-w.y};Be(d,S,nt,T),r({type:"drag/updateCurComponent",payload:d})},b=function N(){document.removeEventListener("mousemove",x),document.removeEventListener("mouseup",N)};document.addEventListener("mousemove",x),document.addEventListener("mouseup",b)},_=function(h,d){if(!s){d.stopPropagation(),d.preventDefault();var w=p()({},a),S=function(N){var E={x:N.clientX-Math.round(i.left),y:N.clientY-Math.round(i.top)};ke(h,w,E,T),r({type:"drag/updateCurComponent",payload:w,element:o})},x=function b(){document.removeEventListener("mousemove",S),document.removeEventListener("mouseup",b)};document.addEventListener("mousemove",S),document.addEventListener("mouseup",x)}},y=!s&&(c==null?void 0:c.id)===o.id;return(0,n.jsxs)("div",{className:"".concat(A.shape," ").concat(y?A.active:""),onMouseDown:u,style:a,children:[y&&be.map(function(f){return(0,n.jsx)("div",{className:"".concat(A["shape-point"]," "),style:Ve(f,a),onMouseDown:function(d){_(f,d)}},f)}),l]})},H=(0,D.connect)(function(t){return p()({},t.drag)})(ze),He={editor:"editor___wGPeX",lock:"lock___PlZuI"},Xe=m.forwardRef(function(t,e){var r=(0,D.useSelector)(function(c){return c.drag}),a=r.curComponent,o=r.realtimeList,l=(0,m.useRef)(null),i=function(){var u;return(u=l.current)===null||u===void 0?void 0:u.getBoundingClientRect()};(0,m.useImperativeHandle)(e,function(){return{editorClient:i()}});var s=function(u){a||u.preventDefault()};return(0,n.jsxs)("div",{ref:l,className:He.editor,style:T,onMouseDown:s,children:[(0,n.jsx)(De,{}),o.map(function(c,u){var _=V[c.type];return(0,n.jsx)(H,{style:c.style,element:c,editorClient:i(),children:(0,n.jsx)(_,p()({},c))},c.id)})]})}),Ge=Xe,Ye=g(48163),X=g(37103),Ue={"preview-modal":"preview-modal___HfH8T"},We=function(e){var r=e.visible,a=e.realtimeList,o=(0,m.useRef)(null),l=(0,m.useState)(0),i=R()(l,2),s=i[0],c=i[1];(0,m.useEffect)(function(){r&&c(u())},[r]);var u=function(){var f=o.current||{},h=f.clientHeight,d=f.clientWidth;return(0,X.yZ)(T.width,T.height,d,h)},_=function(){return(0,n.jsx)("div",{style:p()(p()({},T),{},{position:"relative",transform:"scale(".concat(s,")"),transformOrigin:"0% 0%"}),children:a.map(function(f,h){var d=V[f.type];return(0,n.jsx)(H,{style:f.style,isPreview:!0,children:(0,n.jsx)(d,p()(p()({},f),{},{visible:!0}))},f.id)})})};return(0,n.jsx)(Ye.Z,p()(p()({title:"\u9884\u89C8"},e),{},{width:800,footer:null,forceRender:!0,className:Ue["preview-modal"],children:(0,n.jsx)("div",{ref:o,style:{width:"100%",height:"100%"},children:s&&_()})}))},Ze=(0,D.connect)(function(t){return p()({},t.drag)})(We),M={"real-time-component-list":"real-time-component-list___DixQO",list:"list___xS3kl","icon-container":"icon-container___PdGfq",name:"name___EmUss",actived:"actived___EVn_J"},Je=function(e){var r=e.dispatch,a=e.realtimeList;return(0,n.jsx)("div",{className:M["real-time-component-list"],children:a.map(function(o,l){return(0,n.jsxs)("div",{className:"flex_start_center ".concat(M.list),children:[(0,n.jsx)("i",{className:"iconfont ".concat(o.icon)}),(0,n.jsx)("span",{className:M.name,children:o.label}),(0,n.jsxs)("div",{className:M["icon-container"],children:[(0,n.jsx)("i",{className:"iconfont icon-drag-up",onClick:function(){r({type:"drag/moveUpComponent",payload:l})}}),(0,n.jsx)("i",{className:"iconfont icon-drag-down",onClick:function(){r({type:"drag/moveDownComponent",payload:l})}}),(0,n.jsx)("i",{className:"iconfont icon-drag-delete",onClick:function(){r({type:"drag/deleteComponent",payload:o.id})}})]})]},l)})})},Fe=(0,D.connect)(function(t){return p()({},t.drag)})(Je),Ke=g(28911),I=g(18893),G=g(89392),Qe={set:function(e){var r={name:" ",value:"",expires:"",startTime:new Date().getTime()},a={};if(console.log("\u300Eparams\u300F",e),Object.assign(a,r,e),console.log("\u300Eoptions\u300F",a),a.expires)localStorage.setItem(a.name,JSON.stringify(a));else{var o=Object.prototype.toString.call(a.value);(o==="[object Object]"||o==="[object Array]")&&(a.value=JSON.stringify(a.value)),console.log("\u300Eoptions\u300F",a),localStorage.setItem(a.name,a.value)}},get:function(e){var r=localStorage.getItem(e);try{r=JSON.parse(r)}catch(o){return r}if((0,G.isObject)(r)&&r.startTime){var a=new Date().getTime();return a-r.startTime>r.expires?(localStorage.removeItem(e),!1):r.value}return r},remove:function(e){localStorage.removeItem(e)},clear:function(){localStorage.clear()}},$e=Qe,qe={toolbar:"toolbar___NSLzd","canvas-config":"canvas-config___pkiFM"},et=function(e){var r=e.dispatch,a=e.onPreview,o=e.realtimeList,l=function(){},i=function(){},s=function(){},c=function(){$e.set({name:"drag_data",value:o}),Ke.ZP.success("\u4FDD\u5B58\u6210\u529F\uFF01")},u=function(){r({type:"drag/setRealtimeList",payload:[]})([])},_=function(){},y=function(){},f=function(){};return(0,n.jsxs)("div",{className:"flex_start_center ".concat(qe.toolbar),children:[(0,n.jsx)(I.ZP,{onClick:a,children:"\u9884\u89C8"}),(0,n.jsx)(I.ZP,{onClick:c,children:"\u4FDD\u5B58"}),(0,n.jsx)(I.ZP,{onClick:u,children:"\u6E05\u7A7A\u753B\u5E03"})]})},tt=(0,D.connect)(function(t){return p()({},t.drag)})(et),L={home:"home___a7EPH",left:"left____LZ0X",right:"right___q0hdW","el-select":"el-select___nSETD",center:"center___VV5Nh",content:"content___nGCOl",placeholder:"placeholder___kTIgg","global-attr":"global-attr___yfCe_"},rt=function(e){var r=e.dispatch,a=e.isClickComponent,o=(0,m.useState)(!1),l=R()(o,2),i=l[0],s=l[1],c=(0,m.useRef)(null),u=function(d){d.preventDefault()},_=function(d){d.preventDefault(),d.stopPropagation();var w=JSON.parse(d.dataTransfer.getData("comType")),S=c.current.editorClient;if(w){var x=(0,G.cloneDeep)(B.find(function(b){return b.type===w}))||{};x.id=(0,X.ZP)(),x.style.top=d.clientY-S.y,x.style.left=d.clientX-S.x,r({type:"drag/addRealtimeList",payload:x})}},y=function(d){d.stopPropagation(),r({type:"drag/setIsClickComponent",payload:!1})},f=function(){a||r({type:"drag/setCurComponent"})};return(0,n.jsxs)("div",{className:L.home,children:[(0,n.jsx)(tt,{onPreview:function(){s(!0)}}),(0,n.jsxs)("main",{className:"flex_start_center",children:[(0,n.jsxs)("section",{className:L.left,children:[(0,n.jsx)(je,{}),(0,n.jsx)(Fe,{})]}),(0,n.jsx)("section",{className:L.center,children:(0,n.jsx)("div",{className:L.content,onDragOver:u,onDrop:_,onMouseDown:y,onMouseUp:f,children:(0,n.jsx)(Ge,{ref:c})})}),(0,n.jsx)("section",{className:L.right})]}),i&&(0,n.jsx)(Ze,{visible:i,onCancel:function(){s(!1)}})]})},at=(0,D.connect)(function(t){return p()({},t.drag)})(rt)}}]);
