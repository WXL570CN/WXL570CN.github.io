"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{99767:function(ot,z,f){f.r(z),f.d(z,{default:function(){return nt}});var W=f(27424),N=f.n(W),C=f(62435),y=f(93578),Z=f(38416),T=f.n(Z),F={button:"button___FwiRa"},n=f(86074),J=function(t){var r=t.propValue;return(0,n.jsx)("button",{className:F.button,children:r})},$=J,K={chart:"chart___uyTEF"},Q=f(16649),q=f(87155),ee=function(t){var r=t.propValue;return(0,n.jsx)("div",{className:K.chart,children:(0,n.jsx)(q.Z,{echarts:Q,option:r.option,notMerge:!0,lazyUpdate:!0,style:{height:"100%",width:"100%"}})})},te=ee,re={circle:"circle___k9vDg"},ne=function(t){return(0,n.jsx)("div",{className:re.circle})},ae=ne,oe={"line-shape":"line-shape___e93rv"},ie=function(t){return(0,n.jsx)("div",{className:oe["line-shape"]})},le=ie,se=function(t){var r=t.propValue,a=t.style;return(0,n.jsx)("div",{style:a,children:(0,n.jsx)("img",{draggable:!1,src:r,style:{width:"100%",height:"100%"}})})},ce=se,de={"rect-shape":"rect-shape___nhf6Z"},ue=function(t){return(0,n.jsx)("div",{className:de["rect-shape"]})},he=ue,ve={"svg-star-container":"svg-star-container___Z9Kt8","v-text":"v-text___IbIaG"},fe=function(t){var r=t.style,a=r.width,o=r.height,l=r.borderColor,s=r.backgroundColor,i=(0,C.useRef)(null),c=(0,C.useState)([]),d=N()(c,2),w=d[0],b=d[1];(0,C.useEffect)(function(){j(a,o)},[a,o]);var j=function(m,u){var h=[[.5,0],[.625,.375],[1,.375],[.75,.625],[.875,1],[.5,.75],[.125,1],[.25,.625],[0,.375],[.375,.375]],p=h.map(function(g){return m*g[0]+" "+u*g[1]});b(p.toString())};return(0,n.jsx)("div",{className:ve["svg-star-container"],children:(0,n.jsx)("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("polygon",{ref:i,points:w,stroke:l,fill:s,"stroke-width":"1"})})})},me=fe,I={table:"table___yfQ4J",bold:"bold___xrj_z",stripe:"stripe___CoMOw"},pe=function(t){var r=t.propValue,a=t.style;return(0,n.jsx)("table",{className:I.table,children:(0,n.jsx)("tbody",{children:r.data.map(function(o,l){return(0,n.jsx)("tr",{className:"".concat(r.stripe&&l%2&&I.stripe," ").concat(r.thBold&&l===0&&I.bold),children:o.map(function(s,i){return(0,n.jsx)("td",{children:s},i)})},l)})})})},ge=pe,H={"text-box":"text-box___vDlFz",name:"name___SE33q",value:"value___DDx1n"},Ce=function(t){var r=t.style,a=t.name;return(0,n.jsx)("div",{className:H["text-box"],style:r,title:a,children:(0,n.jsx)("div",{className:H.name,children:a||"\u53CC\u51FB\u8F93\u5165\u6587\u5B57"})})},xe=Ce,_e={"svg-triangle-container":"svg-triangle-container___AtraG","v-text":"v-text___fVfmj"},we=function(t){var r=t.style,a=r.width,o=r.height,l=r.borderColor,s=r.backgroundColor,i=(0,C.useRef)(null),c=(0,C.useState)([]),d=N()(c,2),w=d[0],b=d[1];(0,C.useEffect)(function(){j(a,o)},[a,o]);var j=function(m,u){var h=[[.5,.05],[1,.95],[0,.95]],p=h.map(function(g){return m*g[0]+" "+u*g[1]});b(p.toString())};return(0,n.jsx)("div",{className:_e["svg-triangle-container"],children:(0,n.jsx)("svg",{version:"1.1",baseProfile:"full",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("polygon",{ref:i,points:w,stroke:l,fill:s,"stroke-width":"1"})})})},be=we,_,D={width:1e3,height:645,color:"#000",background:"#fff"},je=["lt","t","rt","r","rb","b","lb","l"],Te={lt:"nw-resize",t:"n-resize",rt:"ne-resize",r:"e-resize",rb:"se-resize",b:"s-resize",lb:"sw-resize",l:"w-resize"},v={TEXT:1,BUTTON:2,IMG:3,TABLE:4,LINE:5,TRI:6,REC:7,STAR:8,CIRCLE:9,CHART:10},X=[{type:v.TEXT,icon:"icon-drag-text",label:"\u6587\u5B57",propValue:"\u53CC\u51FB\u7F16\u8F91\u6587\u5B57",style:{width:200,height:28,fontWeight:400,letterSpacing:0}},{type:v.BUTTON,icon:"icon-drag-button",label:"\u6309\u94AE",propValue:"\u6309\u94AE",style:{width:100,height:34,borderWidth:1,borderColor:"",borderRadius:"",fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""}},{type:v.IMG,icon:"icon-drag-img",label:"\u56FE\u7247",propValue:"https://picsum.photos/300/200",style:{width:300,height:200,borderRadius:""}},{type:v.TABLE,icon:"icon-drag-table",label:"\u8868\u683C",propValue:{data:[["\u8868\u59341","\u8868\u59342","\u8868\u59343"],["\u5185\u5BB91","\u5185\u5BB92","\u5185\u5BB93"]],stripe:!0,thBold:!0},style:{width:600,height:200,fontSize:"",fontWeight:400,textAlign:"center",color:"",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.CHART,icon:"icon-drag-chart",label:"\u56FE\u8868",propValue:{chart:"VChart",option:{title:{text:"\u67F1\u72B6\u56FE",show:!0},legend:{show:!0},tooltip:{show:!0,trigger:"item"},xAxis:{show:!0,data:["A","B","C","D","E"]},yAxis:{},series:{type:"bar",name:"\u9500\u91CF",data:[23,61,35,77,35],itemStyle:{barBorderRadius:5,borderWidth:1,borderType:"solid",borderColor:"#73c0de",shadowColor:"#5470c6",shadowBlur:3}}}},style:{width:760,height:300,borderRadius:""}},{type:v.LINE,icon:"icon-drag-line",label:"\u7EBF",style:{width:200,height:2,backgroundColor:"#000"}},{type:v.TRI,icon:"icon-drag-triangle",label:"\u4E09\u89D2\u5F62",style:{width:80,height:80,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.REC,icon:"icon-drag-rectangle",label:"\u77E9\u5F62",style:{width:200,height:200,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",borderWidth:1,backgroundColor:"",borderStyle:"solid",borderRadius:"",verticalAlign:"middle"}},{type:v.STAR,icon:"icon-drag-star",label:"\u4E94\u89D2\u661F",style:{width:80,height:80,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.CIRCLE,icon:"icon-drag-circle",label:"\u5706\u5F62",style:{width:200,height:200,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",verticalAlign:"middle"}}],G=(_={},T()(_,v.TEXT,xe),T()(_,v.BUTTON,$),T()(_,v.IMG,ce),T()(_,v.TABLE,ge),T()(_,v.LINE,le),T()(_,v.TRI,be),T()(_,v.REC,he),T()(_,v.STAR,me),T()(_,v.CIRCLE,ae),T()(_,v.CHART,te),_),U={"drag-com-list":"drag-com-list___HNdKj",list:"list___DUYsi",iconfont:"iconfont___AqFtN","icon-wenben":"icon-wenben___f1NRt","icon-biaoge":"icon-biaoge___V8pn2","icon-tupian":"icon-tupian___zzsDD"},Se=function(t){var r=function(o){o.dataTransfer.setData("comType",o.target.dataset.type)};return(0,n.jsx)("div",{className:U["drag-com-list"],onDragStart:r,children:X.map(function(a,o){return(0,n.jsx)("div",{className:U.list,draggable:!0,"data-index":o,"data-type":a.type,children:(0,n.jsx)("i",{className:"iconfont ".concat(a.icon)})},o)})})},ye=Se,De=f(42122),S=f.n(De),Le=function(t){return(0,n.jsxs)("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"relative",top:0,left:0},children:[(0,n.jsxs)("defs",{children:[(0,n.jsx)("pattern",{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse",children:(0,n.jsx)("path",{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"})}),(0,n.jsxs)("pattern",{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse",children:[(0,n.jsx)("rect",{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}),(0,n.jsx)("path",{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"})]})]}),(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})},Re=Le,O={shape:"shape___VmOGv","shape-point":"shape-point___qcRVh",delete:"delete___JJKkb",active:"active___bNgQ4"},Me={lt:Ne,t:ke,rt:Ee,r:Ie,rb:Pe,b:Oe,lb:Ae,l:Be};function Ne(e,t){var r=e.width,a=e.height,o=e.top,l=e.left,s=Math.max(0,t.x),i=Math.max(0,t.y),c=l-s,d=o-i;e.width=r+c,e.height=a+d,e.top=i,e.left=s}function Ee(e,t,r){var a=e.height,o=e.top,l=e.left,s=Math.max(0,Math.min(r.width,t.x)),i=Math.max(0,t.y),c=s-l,d=o-i;e.width=c,e.height=a+d,e.top=i}function Pe(e,t,r){var a=e.top,o=e.left,l=Math.max(0,Math.min(r.width,t.x)),s=Math.max(0,Math.min(r.height,t.y)),i=l-o,c=s-a;e.width=i,e.height=c}function Ae(e,t,r){var a=e.width,o=e.top,l=e.left,s=Math.max(0,t.x),i=Math.max(0,Math.min(r.height,t.y)),c=l-s,d=i-o;e.width=a+c,e.height=d,e.left=s}function ke(e,t){var r=e.height,a=e.top;if(!(t.y<0)){var o=a-t.y;e.height=r+o,e.top=t.y}}function Ie(e,t,r){var a=r.width;if(!(t.x>a)){var o=t.x-e.left;e.width=o}}function Oe(e,t,r){var a=r.height;t.y>a||(e.height=t.y-e.top)}function Be(e,t){var r=e.width,a=e.left;if(!(t.x<0)){var o=a-t.x;e.width=r+o,e.left=t.x}}function Ve(e,t,r,a){Me[e](t,r,a)}function ze(e,t,r,a){var o=a.width,l=a.height,s=r.x+t.left,i=r.y+t.top;e.left=Math.max(0,Math.min(s,o-e.width)),e.top=Math.max(0,Math.min(i,l-e.height))}var He=function(t,r){var a=r.width,o=r.height,l=a/2,s=o/2,i={lt:[0,0],rt:[a,0],lb:[0,o],rb:[a,o],t:[l,0],b:[l,o],l:[0,Math.floor(s)],r:[a,Math.floor(s)]}[t];return{marginLeft:"-4px",marginTop:"-4px",left:"".concat(i[0],"px"),top:"".concat(i[1],"px"),cursor:Te[t]}},Xe=function(t){var r=t.style,a=t.element,o=t.children,l=t.editorClient,s=t.isPreview,i=(0,y.tT)("home"),c=i.curComponent,d=i.setCurComonent,w=i.setIsClickComponent,b=i.updateCurComponent,j=function(h){if(!s){w(!0),h.stopPropagation(),d(a);var p=S()({},r),g={x:h.clientX,y:h.clientY},L={top:Number(p.top),left:Number(p.left)},P=function(k){var at={x:k.clientX-g.x,y:k.clientY-g.y};ze(p,L,at,D),b(p,a)},A=function M(){document.removeEventListener("mousemove",P),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",P),document.addEventListener("mouseup",A)}},x=function(h,p){if(!s){p.stopPropagation(),p.preventDefault();var g=S()({},r),L=function(M){var k={x:M.clientX-Math.round(l.left),y:M.clientY-Math.round(l.top)};Ve(h,g,k,D),b(g,a)},P=function A(){document.removeEventListener("mousemove",L),document.removeEventListener("mouseup",A)};document.addEventListener("mousemove",L),document.addEventListener("mouseup",P)}},m=!s&&(c==null?void 0:c.id)===a.id;return(0,n.jsxs)("div",{className:"".concat(O.shape," ").concat(m?O.active:""),onMouseDown:j,style:r,children:[m&&je.map(function(u){return(0,n.jsx)("div",{className:"".concat(O["shape-point"]," "),style:He(u,r),onMouseDown:function(p){x(u,p)}},u)}),o]})},Y=Xe,Ge={editor:"editor___wGPeX",lock:"lock___PlZuI"},Ue=C.forwardRef(function(e,t){var r=(0,y.tT)("home"),a=r.curComponent,o=r.realtimeList,l=(0,C.useRef)(null),s=function(){var d;return(d=l.current)===null||d===void 0?void 0:d.getBoundingClientRect()};(0,C.useImperativeHandle)(t,function(){return{editorClient:s()}});var i=function(d){a||d.preventDefault()};return(0,n.jsxs)("div",{ref:l,className:Ge.editor,style:D,onMouseDown:i,children:[(0,n.jsx)(Re,{}),o.map(function(c,d){var w=G[c.type];return(0,n.jsx)(Y,{style:c.style,element:c,editorClient:s(),children:(0,n.jsx)(w,S()({},c))},c.id)})]})}),Ye=Ue,We=f(35197),B=f(54513),Ze={"preview-modal":"preview-modal___HfH8T"},Fe=function(t){var r=t.visible,a=(0,y.tT)("home"),o=a.realtimeList,l=(0,C.useRef)(null),s=(0,C.useState)(0),i=N()(s,2),c=i[0],d=i[1];(0,C.useEffect)(function(){r&&d(w())},[r]);var w=function(){var x=l.current||{},m=x.clientHeight,u=x.clientWidth;return(0,B.yZ)(D.width,D.height,u,m)},b=function(){return(0,n.jsx)("div",{style:S()(S()({},D),{},{position:"relative",transform:"scale(".concat(c,")"),transformOrigin:"0% 0%"}),children:o.map(function(x,m){var u=G[x.type];return(0,n.jsx)(Y,{style:x.style,isPreview:!0,children:(0,n.jsx)(u,S()(S()({},x),{},{visible:!0}))},x.id)})})};return(0,n.jsx)(We.Z,S()(S()({title:"\u9884\u89C8"},t),{},{width:800,footer:null,forceRender:!0,className:Ze["preview-modal"],children:(0,n.jsx)("div",{ref:l,style:{width:"100%",height:"100%"},children:c&&b()})}))},Je=Fe,E={"real-time-component-list":"real-time-component-list___DixQO",list:"list___xS3kl","icon-container":"icon-container___PdGfq",name:"name___EmUss",actived:"actived___EVn_J"},$e=function(t){var r=(0,y.tT)("home"),a=r.realtimeList,o=r.moveUpComponent,l=r.moveDownComponent,s=r.deleteComponent;return(0,n.jsx)("div",{className:E["real-time-component-list"],children:a.map(function(i,c){return(0,n.jsxs)("div",{className:"flex_start_center ".concat(E.list),children:[(0,n.jsx)("i",{className:"iconfont ".concat(i.icon)}),(0,n.jsx)("span",{className:E.name,children:i.label}),(0,n.jsxs)("div",{className:E["icon-container"],children:[(0,n.jsx)("i",{className:"iconfont icon-drag-up",onClick:function(){o(c)}}),(0,n.jsx)("i",{className:"iconfont icon-drag-down",onClick:function(){l(c)}}),(0,n.jsx)("i",{className:"iconfont icon-drag-delete",onClick:function(){s(i.id)}})]})]},c)})})},Ke=$e,Qe=f(27790),V=f(71577),qe=f(66935),et={toolbar:"toolbar___NSLzd","canvas-config":"canvas-config___pkiFM"},tt=function(t){var r=t.canvasStyleData,a=r===void 0?{}:r,o=t.onPreview,l=(0,y.tT)("home"),s=l.setRealtimeList,i=l.realtimeList,c=function(){},d=function(){},w=function(){},b=function(){qe.Z.set({name:"drag_data",value:i}),Qe.ZP.success("\u4FDD\u5B58\u6210\u529F\uFF01")},j=function(){s([])},x=function(){},m=function(){},u=function(){};return(0,n.jsxs)("div",{className:"flex_start_center ".concat(et.toolbar),children:[(0,n.jsx)(V.ZP,{onClick:o,children:"\u9884\u89C8"}),(0,n.jsx)(V.ZP,{onClick:b,children:"\u4FDD\u5B58"}),(0,n.jsx)(V.ZP,{onClick:j,children:"\u6E05\u7A7A\u753B\u5E03"})]})},rt=tt,R={home:"home___a7EPH",left:"left____LZ0X",right:"right___q0hdW","el-select":"el-select___nSETD",center:"center___VV5Nh",content:"content___nGCOl",placeholder:"placeholder___kTIgg","global-attr":"global-attr___yfCe_"};function nt(){var e=(0,y.tT)("home"),t=e.addRealtimeList,r=e.isClickComponent,a=e.setCurComonent,o=e.setIsClickComponent,l=(0,C.useState)(!1),s=N()(l,2),i=s[0],c=s[1],d=(0,C.useRef)(null),w=function(u){u.preventDefault()},b=function(u){u.preventDefault(),u.stopPropagation();var h=JSON.parse(u.dataTransfer.getData("comType")),p=d.current.editorClient;if(h){var g=(0,B.p$)(X.find(function(L){return L.type===h}))||{};g.id=(0,B.ZP)(),g.style.top=u.clientY-p.y,g.style.left=u.clientX-p.x,t(g)}},j=function(u){u.stopPropagation(),o(!1)},x=function(){r||a(null)};return(0,n.jsxs)("div",{className:R.home,children:[(0,n.jsx)(rt,{onPreview:function(){c(!0)}}),(0,n.jsxs)("main",{className:"flex_start_center",children:[(0,n.jsxs)("section",{className:R.left,children:[(0,n.jsx)(ye,{}),(0,n.jsx)(Ke,{})]}),(0,n.jsx)("section",{className:R.center,children:(0,n.jsx)("div",{className:R.content,onDragOver:w,onDrop:b,onMouseDown:j,onMouseUp:x,children:(0,n.jsx)(Ye,{ref:d})})}),(0,n.jsx)("section",{className:R.right})]}),i&&(0,n.jsx)(Je,{visible:i,onCancel:function(){c(!1)}})]})}}}]);
