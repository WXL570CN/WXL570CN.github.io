"use strict";(self.webpackChunk=self.webpackChunk||[]).push([[866],{54545:function(Lt,A,g){g.r(A),g.d(A,{default:function(){return jt}});var Y=g(42122),m=g.n(Y),V={button:"button___FwiRa"},n=g(86074),G=function(t){var o=t.propValue;return(0,n.jsx)("button",{className:V.button,children:o})},P=G,U=function(t){var o=t.propValue,a=t.style;return(0,n.jsx)("div",{style:a,children:(0,n.jsx)("img",{draggable:!1,src:o,style:{width:"100%",height:"100%"}})})},W=U,B={"text-box":"text-box___vDlFz",name:"name___SE33q",value:"value___DDx1n"},H=function(t){var o=t.style,a=t.name;return(0,n.jsx)("div",{className:B["text-box"],style:o,title:a,children:(0,n.jsx)("div",{className:B.name,children:a||"\u53CC\u51FB\u8F93\u5165\u6587\u5B57"})})},F=H,I={width:1008,height:648,color:"#000",background:"#fff"},J=["lt","t","rt","r","rb","b","lb","l"],Z={lt:"nw-resize",t:"n-resize",rt:"ne-resize",r:"e-resize",rb:"se-resize",b:"s-resize",lb:"sw-resize",l:"w-resize"},v={TEXT:1,BUTTON:2,IMG:3,TABLE:4,LINE:5,TRI:6,REC:7,STAR:8,CIRCLE:9,CHART:10},z=[{type:v.TEXT,icon:"icon-drag-text",label:"\u6587\u5B57",propValue:"\u53CC\u51FB\u7F16\u8F91\u6587\u5B57",style:{width:200,height:28,fontWeight:400,letterSpacing:0},component:function(t){return(0,n.jsx)(F,m()({},t))}},{type:v.BUTTON,icon:"icon-drag-button",label:"\u6309\u94AE",propValue:"\u6309\u94AE",style:{width:100,height:34,borderWidth:1,borderColor:"",borderRadius:"",fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"",color:"",backgroundColor:""},component:function(t){return(0,n.jsx)(P,m()({},t))}},{type:v.IMG,icon:"icon-drag-img",label:"\u56FE\u7247",propValue:"https://picsum.photos/300/200",style:{width:300,height:200,borderRadius:""},component:function(t){return(0,n.jsx)(W,m()({},t))}},{type:v.TABLE,icon:"icon-drag-table",label:"\u8868\u683C",style:{width:600,height:200,fontSize:"",fontWeight:400,textAlign:"center",color:"",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.CHART,icon:"icon-drag-chart",label:"\u56FE\u8868",propValue:{chart:"VChart",option:{title:{text:"\u67F1\u72B6\u56FE",show:!0},legend:{show:!0},tooltip:{show:!0,trigger:"item"},xAxis:{show:!0,data:["A","B","C","D","E"]},yAxis:{},series:{type:"bar",name:"\u9500\u91CF",data:[23,61,35,77,35],itemStyle:{barBorderRadius:5,borderWidth:1,borderType:"solid",borderColor:"#73c0de",shadowColor:"#5470c6",shadowBlur:3}}}},style:{width:800,height:500,borderRadius:""}},{type:v.LINE,icon:"icon-drag-line",label:"\u7EBF",style:{width:200,height:2,backgroundColor:"#000"}},{type:v.TRI,icon:"icon-drag-triangle",label:"\u4E09\u89D2\u5F62",style:{width:80,height:80,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.REC,icon:"icon-drag-rectangle",label:"\u77E9\u5F62",style:{width:200,height:200,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",borderWidth:1,backgroundColor:"",borderStyle:"solid",borderRadius:"",verticalAlign:"middle"}},{type:v.STAR,icon:"icon-drag-star",label:"\u4E94\u89D2\u661F",style:{width:80,height:80,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",backgroundColor:"rgba(255, 255, 255, 1)"}},{type:v.CIRCLE,icon:"icon-drag-circle",label:"\u5706\u5F62",style:{width:200,height:200,fontSize:"",fontWeight:400,lineHeight:"",letterSpacing:0,textAlign:"center",color:"",borderColor:"#000",borderWidth:1,backgroundColor:"",borderStyle:"solid",borderRadius:"",verticalAlign:"middle"}}],O={"drag-com-list":"drag-com-list___HNdKj",list:"list___DUYsi",iconfont:"iconfont___AqFtN","icon-wenben":"icon-wenben___f1NRt","icon-biaoge":"icon-biaoge___V8pn2","icon-tupian":"icon-tupian___zzsDD"},$=function(t){var o=function(r){r.dataTransfer.setData("comType",r.target.dataset.type)};return(0,n.jsx)("div",{className:O["drag-com-list"],onDragStart:o,children:z.map(function(a,r){return(0,n.jsx)("div",{className:O.list,draggable:!0,"data-index":r,"data-type":a.type,children:(0,n.jsx)("i",{className:"iconfont ".concat(a.icon)})},r)})})},K=$,S=g(62435),x=g(49013),Q=function(t){return(0,n.jsxs)("svg",{width:"100%",height:"100%",xmlns:"http://www.w3.org/2000/svg",style:{position:"relative",top:0,left:0},children:[(0,n.jsxs)("defs",{children:[(0,n.jsx)("pattern",{id:"smallGrid",width:"7.236328125",height:"7.236328125",patternUnits:"userSpaceOnUse",children:(0,n.jsx)("path",{d:"M 7.236328125 0 L 0 0 0 7.236328125",fill:"none",stroke:"rgba(207, 207, 207, 0.3)","stroke-width":"1"})}),(0,n.jsxs)("pattern",{id:"grid",width:"36.181640625",height:"36.181640625",patternUnits:"userSpaceOnUse",children:[(0,n.jsx)("rect",{width:"36.181640625",height:"36.181640625",fill:"url(#smallGrid)"}),(0,n.jsx)("path",{d:"M 36.181640625 0 L 0 0 0 36.181640625",fill:"none",stroke:"rgba(186, 186, 186, 0.5)","stroke-width":"1"})]})]}),(0,n.jsx)("rect",{width:"100%",height:"100%",fill:"url(#grid)"})]})},q=Q,k={shape:"shape___VmOGv","shape-point":"shape-point___qcRVh",delete:"delete___JJKkb",active:"active___bNgQ4"},tt={lt:et,t:rt,rt:nt,r:it,rb:at,b:lt,lb:ot,l:ct};function et(e,t){var o=e.width,a=e.height,r=e.top,c=e.left,l=Math.max(0,t.x),s=Math.max(0,t.y),u=c-l,i=r-s;e.width=o+u,e.height=a+i,e.top=s,e.left=l}function nt(e,t,o){var a=e.height,r=e.top,c=e.left,l=Math.max(0,Math.min(o.width,t.x)),s=Math.max(0,t.y),u=l-c,i=r-s;e.width=u,e.height=a+i,e.top=s}function at(e,t,o){var a=e.top,r=e.left,c=Math.max(0,Math.min(o.width,t.x)),l=Math.max(0,Math.min(o.height,t.y)),s=c-r,u=l-a;e.width=s,e.height=u}function ot(e,t,o){var a=e.width,r=e.top,c=e.left,l=Math.max(0,t.x),s=Math.max(0,Math.min(o.height,t.y)),u=c-l,i=s-r;e.width=a+u,e.height=i,e.left=l}function rt(e,t){var o=e.height,a=e.top;if(!(t.y<0)){var r=a-t.y;e.height=o+r,e.top=t.y}}function it(e,t,o){var a=o.width;if(!(t.x>a)){var r=t.x-e.left;e.width=r}}function lt(e,t,o){var a=o.height;t.y>a||(e.height=t.y-e.top)}function ct(e,t){var o=e.width,a=e.left;if(!(t.x<0)){var r=a-t.x;e.width=o+r,e.left=t.x}}function st(e,t,o,a){tt[e](t,o,a)}function dt(e,t,o,a){var r=a.width,c=a.height,l=o.x+t.left,s=o.y+t.top;e.left=Math.max(0,Math.min(l,r-e.width)),e.top=Math.max(0,Math.min(s,c-e.height))}var ut=function(t,o){var a=o.width,r=o.height,c=/t/.test(t),l=/b/.test(t),s=/l/.test(t),u=/r/.test(t),i=0,d=0;t.length===2?(i=s?0:a,d=c?0:r):((c||l)&&(i=a/2,d=c?0:r),(s||u)&&(i=s?0:a,d=Math.floor(r/2)));var _={marginLeft:"-4px",marginTop:"-4px",left:"".concat(i,"px"),top:"".concat(d,"px"),cursor:Z[t]};return _},ht=function(t){var o=t.style,a=t.element,r=t.children,c=t.editorClient,l=(0,x.useDispatch)(),s=(0,x.useSelector)(function(p){return p.drag}),u=s.curComponent,i=s.realtimeList,d=function(f){l({type:"drag/setIsClickComponent",payload:!0}),f.stopPropagation(),l({type:"drag/setCurComonent",payload:a});var h=m()({},o),D={x:f.clientX,y:f.clientY},N={top:Number(h.top),left:Number(h.left)},T=function(R){var St={x:R.clientX-D.x,y:R.clientY-D.y};dt(h,N,St,I),l({type:"drag/updateCurComponent",payload:h,element:a})},M=function j(){document.removeEventListener("mousemove",T),document.removeEventListener("mouseup",j)};document.addEventListener("mousemove",T),document.addEventListener("mouseup",M)},_=function(f,h){h.stopPropagation(),h.preventDefault();var D=m()({},o),N=function(j){var R={x:j.clientX-Math.round(c.left),y:j.clientY-Math.round(c.top)};st(f,D,R,I),l({type:"drag/updateCurComponent",payload:D,element:a})},T=function M(){document.removeEventListener("mousemove",N),document.removeEventListener("mouseup",M)};document.addEventListener("mousemove",N),document.addEventListener("mouseup",T)},b=(u==null?void 0:u.id)===a.id;return(0,n.jsxs)("div",{className:"".concat(k.shape," ").concat(b?k.active:""),onMouseDown:d,style:o,children:[b&&J.map(function(p){return(0,n.jsx)("div",{className:"".concat(k["shape-point"]," "),style:ut(p,o),onMouseDown:function(h){_(p,h)}},p)}),r]})},pt=ht,mt={editor:"editor___wGPeX",lock:"lock___PlZuI",edit:"edit___g8kIm",component:"component___P98Jg"},vt=S.forwardRef(function(e,t){var o=(0,x.useDispatch)(),a=(0,x.useSelector)(function(i){return i.drag}),r=a.curComponent,c=a.realtimeList,l=(0,S.useRef)(null),s=function(){return l.current.getBoundingClientRect()};(0,S.useImperativeHandle)(t,function(){return{editorClient:s()}});var u=function(d){r||d.preventDefault()};return(0,n.jsxs)("div",{ref:l,className:mt.editor,style:{width:"100%",height:"99%"},onMouseDown:u,children:[(0,n.jsx)(q,{}),c.map(function(i,d){return(0,n.jsx)(pt,{style:i.style,element:i,editorClient:s(),children:i.component(i)},i.id)})]})}),ft=vt,L={"real-time-component-list":"real-time-component-list___DixQO",list:"list___xS3kl","icon-container":"icon-container___PdGfq",name:"name___EmUss",actived:"actived___EVn_J"},gt=function(t){console.log("\u300Eprops\u300F",t);var o=t.realtimeList,a=(0,x.useDispatch)();return console.log("\u300ErealtimeList\u300F",o),(0,n.jsx)("div",{className:L["real-time-component-list"],children:o.map(function(r,c){return(0,n.jsxs)("div",{className:"flex_start_center ".concat(L.list),children:[(0,n.jsx)("i",{className:"iconfont ".concat(r.icon)}),(0,n.jsx)("span",{className:L.name,children:r.label}),(0,n.jsxs)("div",{className:L["icon-container"],children:[(0,n.jsx)("i",{className:"iconfont icon-drag-up",onClick:function(){a({type:"drag/moveUpComponent",payload:c})}}),(0,n.jsx)("i",{className:"iconfont icon-drag-down",onClick:function(){a({type:"drag/moveDownComponent",payload:c})}}),(0,n.jsx)("i",{className:"iconfont icon-drag-delete",onClick:function(){a({type:"drag/deleteComponent",payload:r.id})}})]})]},c)})})},xt=(0,x.connect)(function(e){return m()({},e.drag)})(gt),_t={"my-button":"my-button___kCNSI"},Ct=function(t){return(0,n.jsx)("button",m()(m()({},t),{},{className:"".concat(_t["my-button"]," ").concat(t.className),children:t.children}))},w=Ct,bt={"my-input":"my-input___g_6GY"},wt=function(t){return(0,n.jsx)("input",m()(m()({},t),{},{className:"".concat(bt["my-input"]," ").concat(t.className)}))},E=wt,C={toolbar:"toolbar___NSLzd","canvas-config":"canvas-config___pkiFM",insert:"insert___Tl0zF","num-input":"num-input___ICLDL"},yt=function(t){var o=t.canvasStyleData,a=o===void 0?{}:o,r=t.curComponent,c=r===void 0?{}:r,l=function(){},s=function(){},u=function(){},i=function(){},d=function(){},_=function(){},b=function(){},p=function(){},f=function(){};return(0,n.jsxs)("div",{className:"flex_start_center ".concat(C.toolbar),children:[(0,n.jsx)(w,{style:{marginLeft:"10px"},onClick:s,children:"\u64A4\u6D88"}),(0,n.jsx)(w,{style:{marginLeft:"10px"},onClick:u,children:"\u91CD\u505A"}),(0,n.jsx)(w,{style:{marginLeft:"10px"},onClick:i(!1),children:"\u9884\u89C8"}),(0,n.jsx)(w,{style:{marginLeft:"10px"},onClick:d,children:"\u4FDD\u5B58"}),(0,n.jsx)(w,{style:{marginLeft:"10px"},onClick:_,children:"\u6E05\u7A7A\u753B\u5E03"}),(0,n.jsxs)("div",{className:C["canvas-config"],children:[(0,n.jsx)("span",{children:"\u753B\u5E03\u5927\u5C0F"}),(0,n.jsx)(E,{value:a.width,className:C["num-input"]}),(0,n.jsx)("span",{children:"*"}),(0,n.jsx)(E,{value:a.height,className:C["num-input"]})]}),(0,n.jsxs)("div",{className:C["canvas-config"],children:[(0,n.jsx)("span",{children:"\u753B\u5E03\u6BD4\u4F8B"}),(0,n.jsx)(E,{onInput:f,className:C["num-input"]})," %"]})]})},Dt=yt,y={home:"home___a7EPH",left:"left____LZ0X",right:"right___q0hdW","el-select":"el-select___nSETD",center:"center___VV5Nh",content:"content___nGCOl",placeholder:"placeholder___kTIgg","global-attr":"global-attr___yfCe_"},X=g(54513);function jt(e){var t=(0,x.useDispatch)(),o=(0,x.useSelector)(function(i){return i.drag}),a=o.isClickComponent,r=(0,S.useRef)(null),c=function(d){d.preventDefault()},l=function(d){d.preventDefault(),d.stopPropagation();var _=JSON.parse(d.dataTransfer.getData("comType")),b=r.current.editorClient;if(_){var p=(0,X.p$)(z.find(function(f){return f.type===_}))||{};p.id=(0,X.ZP)(),p.style.top=d.clientY-b.y,p.style.left=d.clientX-b.x,t({type:"drag/addRealtimeList",payload:p})}},s=function(d){d.stopPropagation(),t({type:"drag/setIsClickComponent",payload:!1})},u=function(){a||t({type:"drag/setCurComponent"})};return(0,n.jsxs)("div",{className:y.home,children:[(0,n.jsx)(Dt,{}),(0,n.jsxs)("main",{className:"flex_start_center",children:[(0,n.jsxs)("section",{className:y.left,children:[(0,n.jsx)(K,{}),(0,n.jsx)(xt,{})]}),(0,n.jsx)("section",{className:y.center,children:(0,n.jsx)("div",{className:y.content,onDragOver:c,onDrop:l,onMouseDown:s,onMouseUp:u,children:(0,n.jsx)(ft,{ref:r})})}),(0,n.jsx)("section",{className:y.right})]})]})}}}]);
